import { invoke } from "@tauri-apps/api/core";
import type { ParentCollection, Question, QuestionsCollection } from "./routes/types";

async function createParentCollection(title: string) {
    await invoke("create_parent_collection", { title })                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
}

async function getAllParentCollections(): Promise<ParentCollection[]> {
    return await invoke("get_all_parent_collections");
}

async function getCollectionsByParentId(id: number): Promise<QuestionsCollection[]> {
    return await invoke("get_collections_by_parent_id", { par_id: id })                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
}

async function getParentCollectionById(id: number) {
    await invoke("get_parent_collection_by_id", { p_id: id  })                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
}

async function createCollection(title: string): Promise<QuestionsCollection> {
    return await invoke("create_collection", { title });
}

async function getCollectionTitles(): Promise<{ id: number, title: string }[]> {
     return await invoke("get_collections_titles");
}

async function getCollectionById(id: number): Promise<QuestionsCollection> {
    return await invoke("get_collection_by_id", { colId: id })
}


async function insertQuestionByCollectionId(questionNumber: number, id: number): Promise<Question> {
    return await invoke("insert_question_by_collection_id", { questionNumber, collectionId: id });
}

async function getQuestionsByCollectionId(id: number): Promise<Question[]> {
     return await invoke("get_questions_by_collection_id", { colId: id });
}


export { 
         getCollectionById,
         getCollectionTitles, 
         getQuestionsByCollectionId, 
         createCollection, 
         insertQuestionByCollectionId,
         createParentCollection,
         getAllParentCollections,
         getParentCollectionById,
         getCollectionsByParentId
}; 
